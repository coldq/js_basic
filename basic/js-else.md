## Js的小技巧

### 匿名函数 自执行

1.什么是自执行的匿名函数?
它是指形如这样的函数: (function {// code})();

2.匿名函数的好处在于：可以减少局部变量，以免污染现有的运行环境。

3.疑问
为什么(function {// code})();可以被执行, 而function {// code}();却会报错?

4.分析
(1). 首先, 要清楚两者的区别:
(function {// code})是表达式, function {// code}是函数声明.

(2). 其次, js"预编译"的特点:
js在"预编译"阶段, 会解释函数声明, 但却会忽略表式.

(3). 当js执行到function() {//code}();时, 由于function() {//code}在"预编译"阶段已经被解释过, js会跳过function(){//code}, 试图去执行();, 故会报错;
当js执行到(function {// code})();时, 由于(function {// code})是表达式, js会去对它求解得到返回值, 由于返回值是一 个函数, 故而遇到();时, 便会被执行.

另外， 函数转换为表达式的方法并不一定要靠分组操作符()，我们还可以用void操作符，~操作符，!操作符,,+,-等一元操作符
如：

```
!function(){ 
alert("另类的匿名函数自执行"); 
}();
```

### 判断是否是Array

### 判断Object是否空

### ~~ |0
JavaScript中是没有整型概念的，但利用好位操作符可以轻松处理，同时获得效率上的提升。

|0和~~是很好的一个例子，使用这两者可以将浮点转成整型且效率方面要比同类的parseInt,Math.round 要快。在处理像素及动画位移等效果的时候会很有用。性能比较见此。

```
var foo = (12.4 / 4.13) | 0;//结果为3
var bar = ~~(12.4 / 4.13);//结果为3
```

顺便说句，!!将一个值方便快速转化为布尔值 !!window===true 。

### 变量交换

```
let a=1, b=2;
[a,b] = [b,a]// a:2,b:1